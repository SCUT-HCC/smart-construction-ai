# 知识提取策略

> 决定从 16 篇文档中提取什么、不提取什么、怎么组织。
> 这是知识库构建的前提，直接决定生成和审核系统的质量上限。

## 提取原则

1. **入库的必须是可复用的**——换一个工程还能用
2. **不入库的是项目特有的**——只对茂名电白工程有意义
3. **切分粒度对齐章节**——每个知识片段必须标注所属章节
4. **质量优先**——宁可少入库，不要把噪声灌进去

## 入库 vs 不入库

### ✅ 入库（可复用知识）

| 类别 | 示例 | 存储位置 | 用途 |
|------|------|---------|------|
| **规范性表述** | "钢筋绑扎前应检查钢筋规格、数量，核对标高和保护层厚度" | qmd | 生成时的措辞参考 |
| **标准工艺流程** | 灌注桩：测量定位→埋设护筒→钻孔→清孔→钢筋笼下放→混凝土灌注 | qmd | 第六章生成的骨架 |
| **安全措施模板** | 高处作业：系安全带、设防护栏、安全网封闭、专人监护 | qmd | 第八章通用内容 |
| **质量控制要点** | 混凝土浇筑：振捣密实、不漏振、不过振、振捣时间20-30s | qmd | 第七章通用内容 |
| **应急处置标准写法** | 触电事故：断开电源→心肺复苏→120→事故报告 | qmd | 第九章通用内容 |
| **设备参数范围** | QY160 汽车起重机性能参数表 | qmd | 第五章设备配置参考 |
| **危险源识别模式** | 基坑工程：坍塌、物体打击、高处坠落、触电 | LightRAG | 第八章风险识别推理 |
| **章节间逻辑关系** | "施工方法选用XX工艺" → "质量控制必须覆盖XX工序" | LightRAG | 跨章节一致性推理 |
| **编制依据标准列表** | GB 50300-2013、DL/T 5210-2018、Q/CSG... | 规范库 | 第一章自动引用 |

### ❌ 不入库

| 类别 | 示例 | 理由 |
|------|------|------|
| **工程特有信息** | "茂名500kV电白变电站""广东电网能源发展有限公司" | 只适用于这个工程 |
| **具体日期/编号** | "2024年3月开工""编号：BD-030900WS24210003" | 项目特有 |
| **OCR 残留噪声** | 表格对齐符号、LaTeX 残留、水印痕迹 | 噪声 |
| **报审表/签字栏** | "致：广东创成建设监理咨询有限公司..." | 行政流程，不是施工知识 |
| **重复内容** | DOC 5 和 DOC 12 中出现了大段重复的章节 | 重复入库降低检索质量 |
| **过于笼统的描述** | "加强管理""做好安全工作" | 信息密度太低，无法指导生成 |

## 切分策略

### 切分单位

**按章节-子章节切分**，每个片段对应标准 10 章结构中的一个子章节。

```
DOC 6, section 7.3 → 一个知识片段
DOC 11, section 8.2 → 一个知识片段
```

### 元数据标注

每个知识片段必须标注：

```json
{
  "source_doc": 6,
  "chapter": "七、质量管理与控制措施",
  "section": "7.3 事中质量控制",
  "engineering_type": "建筑工程",
  "quality_rating": 3,
  "tags": ["混凝土", "质量控制", "过程检查"]
}
```

| 元数据字段 | 用途 |
|-----------|------|
| `source_doc` | 溯源 |
| `chapter` | 检索时按章节过滤 |
| `section` | 精确定位 |
| `engineering_type` | 按工程类型匹配 |
| `quality_rating` | 优先使用高质量片段 |
| `tags` | 关键词匹配 |

### 切分粒度

| 内容类型 | 粒度 | 说明 |
|---------|------|------|
| 工艺流程 | 整个子章节 | 流程不能割裂 |
| 安全措施 | 按措施点 | 每条措施独立可复用 |
| 质量要求 | 按检验项 | 每个检验项独立 |
| 设备参数 | 整表 | 表格不切分 |
| 应急处置 | 按事故类型 | 每类事故独立 |
| 编制依据 | 整章 | 标准列表不切分 |

## 知识密度评估

入库前对每个片段做密度评估：

| 密度等级 | 判据 | 处理 |
|---------|------|------|
| 高（>0.7） | 具体数据/参数/步骤/标准 | 直接入库 |
| 中（0.3~0.7） | 有用信息混合通用描述 | 精简后入库 |
| 低（<0.3） | 空洞描述、套话、重复 | 丢弃 |

**高密度示例**：
> "钢筋连接采用直螺纹连接，接头等级Ⅰ级，套筒采用GTZQ4-25型，拧紧力矩不小于300N·m"

**低密度示例**：
> "加强施工现场管理，确保工程质量满足设计要求和规范标准"

## 特殊处理

### 表格数据

16 篇文档中包含大量表格（设备清单、参数表、风险评价表）。表格**整体入库**，不做行级切分，用 Markdown 表格格式保留结构。

### 计算书/附图

DOC 10 包含起重机选择计算书、吊绳计算书。这类内容作为**参考案例**入库（整体），生成时用于示范格式，不用于直接复制。

### 工程类型交叉

同一份文档可能涉及多种工程类型（如 DOC 6 既有土建又有安装）。按子章节分别标注 `engineering_type`，不在文档级别标注。

## 提取优先级

| 优先级 | 章节 | 理由 |
|--------|------|------|
| P0 | 六（施工方法） | 最难生成、最依赖案例 |
| P0 | 一（编制依据） | 时效性检查的核心数据 |
| P1 | 七（质量管理） | 与施工方法强关联 |
| P1 | 八（安全管理） | 与施工方法强关联 |
| P2 | 九（应急预案） | 模板化程度高，容易处理 |
| P2 | 三（组织机构） | 模板化程度高 |
| P3 | 二/四/五 | 主要靠用户输入 |
| P3 | 十（绿色施工） | 可选章节 |
