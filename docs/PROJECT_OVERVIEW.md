# é¡¹ç›®é¸Ÿç°ï¼šå—ç½‘æ–½å·¥æ–¹æ¡ˆæ™ºèƒ½è¾…åŠ©ç³»ç»Ÿ

> ç”Ÿæˆæ—¥æœŸï¼š2026-02-23 | åŸºäº docs/architecture/00-09 è§„åˆ’æ–‡æ¡£ä¸å®é™…ä»£ç çš„é€ä¸€æ¯”å¯¹

---

## ä¸€ã€æ€»è§ˆ

| ç»´åº¦ | çŠ¶æ€ |
|------|------|
| **æ€»ä½“è¿›åº¦** | Phase 1 âœ… å®Œæˆ / Phase 2-4 ğŸ”² æœªå¼€å§‹ |
| **ä»£ç è¡Œæ•°** | ~780 è¡Œï¼ˆ6 ä¸ªæ ¸å¿ƒ Python æ–‡ä»¶ï¼‰ |
| **æµ‹è¯•è¦†ç›–** | 0%ï¼ˆæ—  `tests/` ç›®å½•ï¼‰ |
| **è§„åˆ’å®Œå¤‡åº¦** | é«˜ï¼ˆ10 ä»½æ¶æ„æ–‡æ¡£ï¼Œè¦†ç›–å…¨éƒ¨ Phaseï¼‰ |
| **ä»£ç ä¸è§„åˆ’ä¸€è‡´æ€§** | Phase 1 é«˜åº¦ä¸€è‡´ï¼ŒPhase 2-4 å…¨éƒ¨ç©ºç™½ |

---

## äºŒã€æŒ‰è§„åˆ’æ–‡æ¡£é€ä¸€æ¯”å¯¹

### 00-overview.mdï¼ˆæ€»çº²ï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½å®šä¹‰ï¼ˆæ£€æµ‹+ç”Ÿæˆï¼‰ | âœ… å·²è§„åˆ’ | æ¶æ„æ¸…æ™°ï¼Œå°šæœªç¼–ç  |
| ç³»ç»Ÿå…¨æ™¯å›¾ | âœ… å·²è§„åˆ’ | æŠ€æœ¯é€‰å‹æ˜ç¡® |
| æŠ€æœ¯æ ˆï¼ˆPython + LangChain + LangGraphï¼‰ | âš ï¸ éƒ¨åˆ† | Python âœ…ï¼ŒLangChain/LangGraph æœªå®‰è£… |
| æ•°æ®èµ„æºï¼ˆ16ä»½PDFï¼‰ | âœ… å®Œæˆ | `data/1-16.pdf` + `output/1-16/final.md` |
| æ—¶é—´çº¿ Phase 1 | âœ… å®Œæˆ | OCR æ¸…æ´—ç®¡é“ |
| æ—¶é—´çº¿ Phase 2ï¼ˆè¯­æ–™åˆ†æ+çŸ¥è¯†åº“ï¼‰ | ğŸ”² æœªå¼€å§‹ | è®¡åˆ’ 2026-03 |
| æ—¶é—´çº¿ Phase 3ï¼ˆç”Ÿæˆ demoï¼‰ | ğŸ”² æœªå¼€å§‹ | è®¡åˆ’ 2026-04 |
| æ—¶é—´çº¿ Phase 4ï¼ˆå®¡æ ¸ç³»ç»Ÿï¼‰ | ğŸ”² æœªå¼€å§‹ | è®¡åˆ’ 2026-05~06 |

---

### 01-domain-model.mdï¼ˆé¢†åŸŸæ¨¡å‹ï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| 10 ç« èŠ‚æ ‡å‡†å®šä¹‰ | âœ… å®Œæˆ | `templates/standard_50502.md` å·²æ›´æ–°ä¸º 10 ç«  |
| æ–‡æ¡£ç±»å‹åˆ†ç±»ï¼ˆç»¼åˆ/ä¸“é¡¹/ä¸“é¢˜ï¼‰ | âœ… å®Œæˆ | `docs/analysis/` ä¸­æœ‰å®Œæ•´åˆ†æ |
| æœ¯è¯­è¡¨ | âœ… å®Œæˆ | æ–‡æ¡£å±‚é¢å®Œæˆï¼Œä»£ç ä¸­æ— æ•°æ®ç»“æ„ä½“ç° |
| å‘½åè§„èŒƒ | âœ… å®Œæˆ | `templates/naming_conventions.md` |

---

### 02-corpus-analysis.mdï¼ˆè¯­æ–™åˆ†æï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| 16 ä»½æ–‡æ¡£è´¨é‡è¯„çº§ | âœ… å®Œæˆ | é«˜è´¨é‡ï¼šDOC 4/6/7/10/11/12 |
| ç« èŠ‚è¦†ç›–ç‡åˆ†æ | âœ… å®Œæˆ | `docs/analysis/chapter_comparison_table.md` |
| è·¨æ–‡æ¡£å…±æ€§æ¨¡å¼è¯†åˆ« | âœ… å®Œæˆ | ç»“æ„ç¨³å®š/ä¸ç¨³å®šç« èŠ‚å·²å½’çº³ |
| åˆ†æè„šæœ¬ | âœ… å®Œæˆ | `docs/analysis/chapter_analysis.py` |

---

### 03-chapter-specification.mdï¼ˆç« èŠ‚è§„æ ¼ä¹¦ï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| 10 ç« å¿…å†™å†…å®¹å®šä¹‰ | âœ… å®Œæˆ | æ–‡æ¡£å±‚é¢å®Œæ•´ |
| æ¯ç« è´¨é‡åˆ¤æ® | âœ… å®Œæˆ | ä½†æœªè½¬åŒ–ä¸ºä»£ç ä¸­çš„æ£€æŸ¥é€»è¾‘ |
| ç« èŠ‚é—´ä¾èµ–å…³ç³»å›¾ | âœ… å®Œæˆ | ç”Ÿæˆç³»ç»Ÿä¸²è¡Œç”Ÿæˆçš„ä¾æ® |
| å†…å®¹æ¥æºæ ‡æ³¨ | âœ… å®Œæˆ | çŸ¥è¯†åº“/ç”¨æˆ·è¾“å…¥/æ¨¡æ¿/æ¡ˆä¾‹æ£€ç´¢ |

**æ³¨æ„**ï¼šè§„æ ¼ä¹¦åœ¨æ–‡æ¡£å±‚é¢éå¸¸å®Œå–„ï¼Œä½†å°šæ— ä»»ä½•ä»£ç å®ç°å°†å…¶è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„éªŒè¯è§„åˆ™æˆ–ç”Ÿæˆçº¦æŸã€‚

---

### 04-knowledge-extraction.mdï¼ˆçŸ¥è¯†æå–ç­–ç•¥ï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| å…¥åº“/ä¸å…¥åº“åˆ¤æ® | âœ… å·²è§„åˆ’ | æ¸…æ™°çš„åˆ†ç±»æ ‡å‡† |
| åˆ‡åˆ†ç­–ç•¥ï¼ˆæŒ‰å­ç« èŠ‚ï¼‰ | ğŸ”² æœªå®ç° | æ— åˆ‡åˆ†ä»£ç  |
| å…ƒæ•°æ®æ ‡æ³¨ schema | ğŸ”² æœªå®ç° | æ— å…ƒæ•°æ®å¤„ç†ä»£ç  |
| çŸ¥è¯†å¯†åº¦è¯„ä¼° | ğŸ”² æœªå®ç° | æ— è¯„ä¼°é€»è¾‘ |
| æå–ä¼˜å…ˆçº§æ’åº | âœ… å·²è§„åˆ’ | P0: æ–½å·¥æ–¹æ³•+ç¼–åˆ¶ä¾æ® |

**è¿™æ˜¯ Phase 2 çš„æ ¸å¿ƒå‰ç½®å·¥ä½œï¼Œå½“å‰å®Œå…¨ç©ºç™½ã€‚**

---

### 05-knowledge-base.mdï¼ˆçŸ¥è¯†åº“è®¾è®¡ï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| qmd + sqlite-vec æ¡ˆä¾‹æ£€ç´¢ | âš ï¸ ä¾èµ–å·²è£… | `requirements.txt` æœ‰ `qmd==0.1.0` å’Œ `sqlite-vec==0.1.6`ï¼Œä½†æ— ä½¿ç”¨ä»£ç  |
| 8 ä¸ª Collection è®¾è®¡ | ğŸ”² æœªå®ç° | ch01_basis ~ templates å…¨æœªåˆ›å»º |
| åµŒå…¥æ¨¡å‹é€‰å‹ | ğŸ”² å¾…å®š | bge-m3 / text2vec ç­‰æœªå†³å®š |
| LightRAG çŸ¥è¯†å›¾è°± | ğŸ”² æœªå®ç° | ä¾èµ–æœªå®‰è£…ï¼Œæ— ä»£ç  |
| å®ä½“/å…³ç³»æŠ½å– | ğŸ”² æœªå®ç° | |
| èåˆç­–ç•¥ | ğŸ”² æœªå®ç° | LightRAG + qmd ä¼˜å…ˆçº§åˆå¹¶ |
| `KnowledgeRetriever` ç±» | ğŸ”² æœªå®ç° | ä»…å­˜åœ¨äºè§„åˆ’æ–‡æ¡£ |

---

### 06-generation-system.mdï¼ˆç”Ÿæˆç³»ç»Ÿï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| `InputParser` | ğŸ”² æœªå®ç° | |
| `StandardModel` (Pydantic) | ğŸ”² æœªå®ç° | pydantic å·²åœ¨ requirements.txt |
| `GenerationCoordinator` | ğŸ”² æœªå®ç° | |
| `BaseChapterAgent` åŸºç±» | ğŸ”² æœªå®ç° | |
| 9 ä¸ªç« èŠ‚ Agent | ğŸ”² æœªå®ç° | |
| Jinja2 Prompt æ¨¡æ¿ | ğŸ”² æœªå®ç° | jinja2 ä¾èµ–æœªå®‰è£… |
| ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆæ‘˜è¦+å…³é”®å‚æ•°ï¼‰ | ğŸ”² æœªå®ç° | |
| å•ç« éªŒè¯æœºåˆ¶ | ğŸ”² æœªå®ç° | |
| å…¨æ–‡ä¸€è‡´æ€§éªŒè¯ | ğŸ”² æœªå®ç° | |
| è‡ªåŠ¨ä¿®å¤ `Fixer` | ğŸ”² æœªå®ç° | |
| ç›®å½•ç»“æ„ `agents/prompts/retrieval/validation/` | ğŸ”² æœªåˆ›å»º | |
| `main_generator.py` å…¥å£ | ğŸ”² æœªå®ç° | |

**è¡¥å……**ï¼š`workflow/å·¥ç¨‹æ¦‚å†µ.md` ä¸­æœ‰ä¸€ä»½æ‰‹å·¥å†™çš„"å·¥ç¨‹æ¦‚å†µ"ç« èŠ‚ç¤ºä¾‹ï¼Œåƒæ˜¯æ—©æœŸå®éªŒäº§ç‰©ï¼Œå†…å« `{{éœ€è¡¥å……}}` å ä½ç¬¦ï¼Œå¯è§†ä¸ºç”Ÿæˆç³»ç»Ÿçš„æ‰‹åŠ¨åŸå‹éªŒè¯ã€‚

---

### 07-review-system.mdï¼ˆå®¡æ ¸ç³»ç»Ÿï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| `ReviewCoordinator` | ğŸ”² æœªå®ç° | |
| `ChapterSplitter` ç« èŠ‚åˆ†å‰² | ğŸ”² æœªå®ç° | |
| `ChapterMapper` æ ‡é¢˜æ˜ å°„ | ğŸ”² æœªå®ç° | |
| ç»´åº¦ä¸€ï¼šå®Œæ•´æ€§æ£€æŸ¥ | ğŸ”² æœªå®ç° | |
| ç»´åº¦äºŒï¼šæ—¶æ•ˆæ€§æ£€æŸ¥ | ğŸ”² æœªå®ç° | éœ€è§„èŒƒç‰ˆæœ¬æ•°æ®åº“ |
| ç»´åº¦ä¸‰ï¼šåˆè§„æ€§æ£€æŸ¥ | ğŸ”² æœªå®ç° | ä¾èµ– LightRAG |
| è§„èŒƒæ•°æ®åº“ | ğŸ”² æœªå®ç° | |
| æ£€æµ‹æŠ¥å‘Šç”Ÿæˆ | ğŸ”² æœªå®ç° | |

---

### 08-data-pipeline.mdï¼ˆæ•°æ®ç®¡é“ï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| MonkeyOCR å®¢æˆ·ç«¯ | âœ… å®Œæˆ | `crawler.py:69è¡Œ` |
| æ­£åˆ™æ¸…æ´— | âœ… å®Œæˆ | `cleaning.py` RegexCleaning |
| LLM è¯­ä¹‰æ¸…æ´— | âœ… å®Œæˆ | `cleaning.py` LLMCleaning |
| è´¨é‡éªŒè¯ | âœ… å®Œæˆ | `verifier.py` MarkdownVerifier |
| æµç¨‹ç¼–æ’ | âœ… å®Œæˆ | `processor.py` PDFProcessor |
| CLI å…¥å£ | âœ… å®Œæˆ | `main.py` |
| 16 ä»½æ–‡æ¡£å¤„ç†ç»“æœ | âœ… å®Œæˆ | `output/1-16/final.md` |

**è¿™æ˜¯å”¯ä¸€å®Œå…¨å®ç°çš„æ¨¡å—ã€‚ä»£ç ä¸è§„åˆ’é«˜åº¦ä¸€è‡´ã€‚**

---

### 09-deployment.mdï¼ˆéƒ¨ç½²ä¸ä¾èµ–ï¼‰

| è§„åˆ’å†…å®¹ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| Conda ç¯å¢ƒ `sca` | âœ… å®Œæˆ | |
| requirements.txt | âœ… å®Œæˆ | ä¾èµ–ç‰ˆæœ¬å·²é”å®š |
| MonkeyOCR Docker | âœ… å®Œæˆ | |
| Phase 2+ å¾…æ–°å¢ä¾èµ– | âš ï¸ éƒ¨åˆ† | qmd/sqlite-vec å·²è£…ï¼›langchain/langgraph/lightrag/jinja2 æœªè£… |

---

## ä¸‰ã€é—®é¢˜æ¸…å•

### ğŸ”´ ä¸¥é‡é—®é¢˜

| # | é—®é¢˜ | ä½ç½® | å»ºè®® |
|---|------|------|------|
| 1 | **API Key ç¡¬ç¼–ç ** | `config.py:2` | è¿ç§»è‡³ç¯å¢ƒå˜é‡ `os.environ.get("LLM_API_KEY")` |
| 2 | **é›¶æµ‹è¯•è¦†ç›–** | æ—  `tests/` ç›®å½• | Phase 2 å¼€å§‹å‰é¡»å»ºç«‹æµ‹è¯•åŸºç¡€ |

### ğŸŸ¡ éœ€è¦ä¿®æ”¹/æ¸…ç†

| # | é—®é¢˜ | ä½ç½® | å»ºè®® |
|---|------|------|------|
| 3 | **loguru æœªä½¿ç”¨** | `requirements.txt` åˆ—äº† `loguru`ï¼Œä½† `logger_system.py` ä½¿ç”¨æ ‡å‡†åº“ `logging` | äºŒé€‰ä¸€ï¼šè¦ä¹ˆæ”¹ç”¨ loguruï¼Œè¦ä¹ˆä» requirements ç§»é™¤ |
| 4 | **pydantic æœªä½¿ç”¨** | `requirements.txt` åˆ—äº† `pydantic`ï¼Œå½“å‰æ— ä»£ç ä½¿ç”¨ | Phase 2 ä¼šç”¨åˆ°ï¼Œæš‚å¯ä¿ç•™ |
| 5 | **å­¤ç«‹ç›®å½• `test_output/`** | åŒ…å« `7/` å’Œ `14/` å­ç›®å½•ï¼Œç–‘ä¼¼æ‰‹åŠ¨æµ‹è¯•æ®‹ç•™ | åŠ å…¥ `.gitignore` æˆ–åˆ é™¤ |
| 6 | **å­¤ç«‹ç›®å½• `test_run/`** | åŒ…å« `7/` å­ç›®å½•ï¼Œç–‘ä¼¼æ‰‹åŠ¨æµ‹è¯•æ®‹ç•™ | åŠ å…¥ `.gitignore` æˆ–åˆ é™¤ |
| 7 | **`workflow/` ç›®å½•** | ä»…å«ä¸€ä»½æ‰‹å†™çš„ `å·¥ç¨‹æ¦‚å†µ.md` å’Œ `.opencode` é…ç½® | ç§»åˆ° `docs/drafts/` æˆ–åˆ é™¤ |
| 8 | **`templates/awesome-claude-skills/`** | ä¸é¡¹ç›®æ— å…³çš„ç¬¬ä¸‰æ–¹å·¥å…·é›†ï¼ˆdocx/pdf/pptx/gif ç­‰ï¼‰ï¼Œ~40ä¸ª Python æ–‡ä»¶ | ä»é¡¹ç›®æ ¹ç›®å½•ç§»é™¤ |
| 9 | **CODEMAPS è¿‡æ—¶** | `data.md` ä»å†™"7 å¤§ç« èŠ‚æ ‡å‡†"ï¼Œæ¨¡æ¿å·²æ˜¯ 10 ç«  | æ›´æ–° CODEMAPS |
| 10 | **`watchdog` ä¾èµ–** | `requirements.txt` ä¸­æœ‰ `watchdog==6.0.0`ï¼Œæœªè¢«ä»»ä½•ä»£ç ä½¿ç”¨ | ç§»é™¤ |

### ğŸŸ¢ å»ºè®®ä¼˜åŒ–ï¼ˆéå¿…é¡»ï¼‰

| # | å»ºè®® | è¯´æ˜ |
|---|------|------|
| 11 | `crawler.py` çš„ API ç«¯ç‚¹ä¸ä¸€è‡´ | ä»£ç ç”¨ `/parse`ï¼ŒCODEMAPS å†™ `/file/pdf_to_md`ï¼Œéœ€ç¡®è®¤å®é™…ç«¯ç‚¹ |
| 12 | LLM æ¸…æ´—ç¼ºå°‘é‡è¯•æœºåˆ¶ | `08-data-pipeline.md` å·²æ ‡æ³¨"å¾…å®ç°" |
| 13 | `verifier.py` è¿”å› `Dict` ä½†ä¸é˜»æ–­æµç¨‹ | éªŒè¯å¤±è´¥åªæ‰“ WARNINGï¼Œä¸å½±å“è¾“å‡º |

---

## å››ã€ç›®å½•ç»“æ„ç°çŠ¶ vs è§„åˆ’

```
smart-construction-ai/
â”œâ”€â”€ main.py              âœ… Phase 1 å…¥å£ï¼ˆä¿ç•™ï¼‰
â”œâ”€â”€ config.py            âœ… é…ç½®ä¸­å¿ƒï¼ˆéœ€ä¿®å¤ API Keyï¼‰
â”œâ”€â”€ crawler.py           âœ… OCR å®¢æˆ·ç«¯
â”œâ”€â”€ cleaning.py          âœ… æ¸…æ´—å¼•æ“
â”œâ”€â”€ processor.py         âœ… æµç¨‹ç¼–æ’
â”œâ”€â”€ verifier.py          âœ… è´¨é‡éªŒè¯
â”œâ”€â”€ utils/               âœ… åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ logger_system.py
â”œâ”€â”€ data/                âœ… åŸå§‹ PDFï¼ˆ16ä»½ï¼‰
â”œâ”€â”€ output/1-16/         âœ… æ¸…æ´—åæ•°æ®
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ standard_50502.md       âœ… 10ç« èŠ‚æ ‡å‡†æ¨¡æ¿
â”‚   â”œâ”€â”€ naming_conventions.md   âœ… å‘½åè§„èŒƒ
â”‚   â””â”€â”€ awesome-claude-skills/  âŒ æ— å…³æ–‡ä»¶ï¼Œåº”ç§»é™¤
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ architecture/00-09.md   âœ… è§„åˆ’æ–‡æ¡£ï¼ˆå®Œæ•´ï¼‰
â”‚   â”œâ”€â”€ analysis/               âœ… è¯­æ–™åˆ†ææŠ¥å‘Š
â”‚   â””â”€â”€ CODEMAPS/               âš ï¸ éƒ¨åˆ†è¿‡æ—¶
â”œâ”€â”€ workflow/            â“ å­¤ç«‹å®éªŒç›®å½•
â”œâ”€â”€ test_output/         â“ æµ‹è¯•æ®‹ç•™
â”œâ”€â”€ test_run/            â“ æµ‹è¯•æ®‹ç•™
â”‚
â”‚  ===== ä»¥ä¸‹ä¸ºè§„åˆ’ä¸­ä½†æœªåˆ›å»ºçš„ç›®å½• =====
â”‚
â”œâ”€â”€ agents/              ğŸ”² 9ä¸ªç« èŠ‚ Agentï¼ˆPhase 3ï¼‰
â”‚   â”œâ”€â”€ base.py
â”‚   â”œâ”€â”€ chapter1_basis.py
â”‚   â””â”€â”€ ...chapter9_emergency.py
â”œâ”€â”€ prompts/             ğŸ”² Prompt æ¨¡æ¿ï¼ˆPhase 3ï¼‰
â”‚   â”œâ”€â”€ static/
â”‚   â””â”€â”€ agents/
â”œâ”€â”€ retrieval/           ğŸ”² æ£€ç´¢åè°ƒå™¨ï¼ˆPhase 2-3ï¼‰
â”œâ”€â”€ validation/          ğŸ”² éªŒè¯+ä¿®å¤ï¼ˆPhase 3-4ï¼‰
â”œâ”€â”€ knowledge_base/      ğŸ”² qmd + LightRAG æ•°æ®ï¼ˆPhase 2ï¼‰
â”œâ”€â”€ main_generator.py    ğŸ”² ç”Ÿæˆç³»ç»Ÿå…¥å£ï¼ˆPhase 3ï¼‰
â””â”€â”€ tests/               ğŸ”² æµ‹è¯•ç›®å½•ï¼ˆåº”ç«‹å³åˆ›å»ºï¼‰
```

---

## äº”ã€ä¾èµ–çŠ¶æ€

| ä¾èµ–åŒ… | requirements.txt | å®é™…ä½¿ç”¨ | çŠ¶æ€ |
|--------|:---:|:---:|------|
| openai | âœ… | âœ… | æ­£å¸¸ |
| requests | âœ… | âœ… | æ­£å¸¸ |
| tqdm | âœ… | âœ… | æ­£å¸¸ |
| pydantic | âœ… | âŒ | Phase 2+ ä½¿ç”¨ï¼Œå¯ä¿ç•™ |
| loguru | âœ… | âŒ | ä¸ logging å†²çªï¼Œéœ€äºŒé€‰ä¸€ |
| qmd | âœ… | âŒ | Phase 2 ä½¿ç”¨ |
| sqlite-vec | âœ… | âŒ | Phase 2 ä½¿ç”¨ |
| watchdog | âœ… | âŒ | æ— ç”¨ï¼Œåº”ç§»é™¤ |
| PyYAML | âœ… | âŒ | æœªä½¿ç”¨ï¼Œå¯èƒ½æ˜¯é—´æ¥ä¾èµ– |
| **langchain** | âŒ | â€” | Phase 3 éœ€å®‰è£… |
| **langgraph** | âŒ | â€” | Phase 3 éœ€å®‰è£… |
| **lightrag** | âŒ | â€” | Phase 2 éœ€å®‰è£… |
| **jinja2** | âŒ | â€” | Phase 3 éœ€å®‰è£… |

---

## å…­ã€å„ Phase å·¥ä½œé‡è¯„ä¼°

### Phase 2 â€” çŸ¥è¯†åº“æ„å»ºï¼ˆè®¡åˆ’ 2026-03ï¼‰

éœ€è¦ä»é›¶å®ç°çš„æ¨¡å—ï¼š

| æ¨¡å— | æ ¸å¿ƒå·¥ä½œ | ä¾èµ– |
|------|---------|------|
| çŸ¥è¯†æå–ç®¡é“ | è¯»å– `output/1-16/final.md` â†’ æŒ‰å­ç« èŠ‚åˆ‡åˆ† â†’ å…ƒæ•°æ®æ ‡æ³¨ â†’ è´¨é‡è¿‡æ»¤ | 04-knowledge-extraction è§„åˆ’ |
| qmd Collection æ„å»º | 8 ä¸ª Collection â†’ åµŒå…¥ç”Ÿæˆ â†’ ç´¢å¼•æ„å»º | åµŒå…¥æ¨¡å‹é€‰å‹ |
| LightRAG å›¾è°±æ„å»º | å®ä½“æŠ½å– â†’ å…³ç³»æŠ½å– â†’ å›¾è°±å…¥åº“ | lightrag åŒ…å®‰è£… |
| `KnowledgeRetriever` | ç»Ÿä¸€æ£€ç´¢æ¥å£ | qmd + LightRAG |
| åµŒå…¥æ¨¡å‹è¯„ä¼° | bge-m3 vs text2vec vs å…¶ä»– | GPU èµ„æº |

### Phase 3 â€” ç”Ÿæˆç³»ç»Ÿï¼ˆè®¡åˆ’ 2026-04ï¼‰

| æ¨¡å— | æ ¸å¿ƒå·¥ä½œ | ä¾èµ– |
|------|---------|------|
| `InputParser` + `StandardModel` | è¾“å…¥æ ‡å‡†åŒ–ï¼ˆJSON/è‡ªç„¶è¯­è¨€/PDFï¼‰ | pydantic |
| 9 ä¸ª Chapter Agent | æ¯ç« ç‹¬ç«‹ Agent + Jinja2 Prompt | langchain, jinja2 |
| `GenerationCoordinator` | LangGraph çŠ¶æ€å›¾ç¼–æ’ | langgraph |
| ä¸Šä¸‹æ–‡ç®¡ç† | å‰åºæ‘˜è¦ + å…³é”®å‚æ•°æå– | |
| éªŒè¯ + ä¿®å¤ | å•ç« éªŒè¯ + å…¨æ–‡ä¸€è‡´æ€§ + è‡ªåŠ¨ä¿®å¤ | |
| `main_generator.py` | ç”Ÿæˆç³»ç»Ÿ CLI | |

### Phase 4 â€” å®¡æ ¸ç³»ç»Ÿï¼ˆè®¡åˆ’ 2026-05~06ï¼‰

| æ¨¡å— | æ ¸å¿ƒå·¥ä½œ | ä¾èµ– |
|------|---------|------|
| `ChapterSplitter` + `ChapterMapper` | ç« èŠ‚è¯†åˆ« + è¯­ä¹‰æ˜ å°„ | |
| `CompletenessChecker` | 10ç« å®Œæ•´æ€§è¯„åˆ† | å‘½åè§„èŒƒ |
| `TimelinessChecker` | æ ‡å‡†ç‰ˆæœ¬æ•°æ®åº“ + æ—¶æ•ˆæ¯”å¯¹ | è§„èŒƒæ•°æ®åº“ï¼ˆéœ€æ‰‹å·¥æ„å»ºï¼‰ |
| `ComplianceChecker` | LightRAG æ¨ç† + åˆè§„éªŒè¯ | LightRAG |
| `ReportGenerator` | æ£€æµ‹æŠ¥å‘Šè¾“å‡º | |

---

## ä¸ƒã€å…³é”®å†³ç­–ç‚¹ï¼ˆå¾…ç¡®è®¤ï¼‰

è¿™äº›é—®é¢˜åœ¨ `00-overview.md` å’Œ CLAUDE.md ä¸­å·²åˆ—å‡ºä½†æœªè§£å†³ï¼š

1. **åµŒå…¥æ¨¡å‹é€‰å‹**ï¼šbge-m3 / text2vec-large-chinese / å…¶ä»–ï¼Ÿ
2. **ç”Ÿæˆ/å®¡æ ¸ LLM é€‰å‹**ï¼šç»§ç»­ç”¨ DeepSeek è¿˜æ˜¯åˆ‡æ¢åˆ° Claude/GPT-4ï¼Ÿ
3. **ç°åœºå‹˜æŸ¥æŠ¥å‘Šå’Œåœ°è´¨å‹˜æŸ¥æŠ¥å‘Š**ï¼šæ˜¯å¦å±äºç³»ç»ŸåŠŸèƒ½ï¼Ÿ
4. **äººå‘˜é…ç½®è¯†åˆ«**ï¼šå…·ä½“è¦æ±‚æœªæ˜ç¡®
5. **5.3/5.4 æ˜¯å¦å±äºç³»ç»ŸåŠŸèƒ½**ï¼šæ–½å·¥å‡†å¤‡ä¸­çš„"æœºæ¢°è®¾å¤‡é…ç½®"å’Œ"åŠ³åŠ¨åŠ›å®‰æ’"
6. **å¯¹æ¥"æ–½å·¥æ–¹æ¡ˆè¿‡ç¨‹ç®¡ç†è½¯ä»¶"**ï¼šæ¥å£è§„èŒƒæœªå®š

---

## å…«ã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

æŒ‰ä¼˜å…ˆçº§æ’åˆ—ï¼š

| ä¼˜å…ˆçº§ | è¡ŒåŠ¨ | ç†ç”± |
|--------|------|------|
| P0 | ä¿®å¤ API Key ç¡¬ç¼–ç  | å®‰å…¨é£é™© |
| P0 | æ¸…ç†æ— å…³æ–‡ä»¶ï¼ˆ`awesome-claude-skills/`ã€`test_output/`ã€`test_run/`ï¼‰ | å‡å°‘é¡¹ç›®å™ªå£° |
| P1 | ç»Ÿä¸€æ—¥å¿—æ–¹æ¡ˆï¼ˆloguru vs loggingï¼‰ | ä»£ç ä¸€è‡´æ€§ |
| P1 | å»ºç«‹ `tests/` éª¨æ¶ + Phase 1 åŸºç¡€æµ‹è¯• | ä¸º Phase 2 å¼€å‘åšå‡†å¤‡ |
| P1 | å¼€å§‹ Phase 2ï¼šçŸ¥è¯†æå– + qmd å…¥åº“ | æŒ‰æ—¶é—´çº¿ 2026-03 |
| P2 | æ›´æ–° CODEMAPS | æ–‡æ¡£ä¸ä»£ç ä¿æŒåŒæ­¥ |
| P2 | ç¡®å®šåµŒå…¥æ¨¡å‹ + LLM é€‰å‹ | Phase 2-3 çš„æŠ€æœ¯å‰æ |

---

## ä¹ã€å¼€å‘ä»»åŠ¡æ’æœŸ

### ä¾èµ–å…³ç³»æ€»è§ˆ

```
Phase 0 (æ¸…ç†, 4 ä»»åŠ¡å…¨éƒ¨å¯å¹¶è¡Œ)        Phase 3 å‰åŠï¼ˆå¯ä¸ P2 å¹¶è¡Œå¯åŠ¨ï¼‰
 0.1 â”€â”                                 3.1 â†’ 3.2
 0.2 â”€â”¼â†’ 1.1 (æµ‹è¯•åŸºç¡€)                        â”‚
 0.3 â”€â”¤       â”‚                                â”‚
 0.4 â”€â”˜       â”‚                                â”‚
              â–¼                                â”‚
       Phase 2 (çŸ¥è¯†åº“)                         â”‚
       2.1 â†’ 2.2 â”€â”€â†’ 2.4 â”€â”€â†’ 2.6 â”€â”€â†’ 3.3 â†â”€â”€â”€â”˜
        â”‚       â†‘      â”‚       â†‘       â”‚
        â”‚      2.3     â”‚       â”‚     3.4
        â”‚         â””â”€â”€â†’ 2.5 â”€â”€â”€â”˜       â”‚
        â”‚                            3.5
        â”‚
        â””â”€â”€â†’ Phase 4 (å®¡æ ¸, å¯ä¸ P3 å¹¶è¡Œ)
             4.1 â”€â”€â†’ 4.2 â”€â”€â”
              â”œâ”€â”€â†’ 4.3 â”€â”€â”€â”€â”¼â†’ 4.5
         2.5 â”€â”€â†’ 4.4 â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                        Phase 5: 5.1
```

**ä¾èµ–å…³ç³»è¯´æ˜**ï¼š
- Phase 3.1/3.2ï¼ˆè¾“å…¥è§£æ + Agent åŸºç±»ï¼‰ä¸ä¾èµ–çŸ¥è¯†åº“ï¼Œå¯ä¸ Phase 2 **å¹¶è¡Œå¯åŠ¨**
- Phase 4.1ï¼ˆç« èŠ‚æ˜ å°„ï¼‰ä»…ä¾èµ– 2.1ï¼ˆç« èŠ‚åˆ†å‰²å™¨ï¼‰ï¼Œå¯åœ¨ Phase 2 æ—©æœŸå®Œæˆåæå‰å¯åŠ¨
- Phase 4.2/4.3 ä»…ä¾èµ– 4.1ï¼Œå¯ä¸ Phase 3 **å®Œå…¨å¹¶è¡Œ**
- Phase 4.4ï¼ˆåˆè§„æ€§æ£€æŸ¥ï¼‰ä¾èµ– 2.5ï¼ˆLightRAGï¼‰ï¼Œéœ€ç­‰ Phase 2 ä¸­åæœŸ

---

### Phase 0 â€” ä»£ç æ¸…ç†ï¼ˆæ¶ˆé™¤æŠ€æœ¯å€ºåŠ¡ï¼‰

å››ä¸ªä»»åŠ¡äº’ç›¸ç‹¬ç«‹ï¼Œå¯å¹¶è¡Œæ‰§è¡Œã€‚

| ç¼–å· | ä»»åŠ¡ | å‰ç½®ä¾èµ– | æ¶‰åŠæ–‡ä»¶ | éªŒæ”¶æ ‡å‡† |
|------|------|---------|---------|---------|
| 0.1 | ä¿®å¤ API Key ç¡¬ç¼–ç  | æ—  | `config.py` | `grep -r "sk-" *.py` è¿”å›ç©ºï¼›ä½¿ç”¨ `os.environ.get("SCA_LLM_API_KEY")` è¯»å–ï¼›è®¾ç½®ç¯å¢ƒå˜é‡å `conda run -n sca python main.py --input data/7.pdf --output test_tmp` æ­£å¸¸è¿è¡Œ |
| 0.2 | æ¸…ç†å­¤ç«‹ç›®å½•ä¸å®éªŒæ®‹ç•™ | æ—  | `test_output/`, `test_run/`, `workflow/`, `.gitignore` | ä¸‰ä¸ªç›®å½•å·²åˆ é™¤ï¼›`.gitignore` æ·»åŠ  `test_output/`ã€`test_run/` è§„åˆ™ï¼›`git status` å¹²å‡€ |
| 0.3 | ç§»é™¤æ— å…³ç¬¬ä¸‰æ–¹æ–‡ä»¶ | æ—  | `templates/awesome-claude-skills/` | ç›®å½•å·²åˆ é™¤ï¼›`find templates -name "*.py" \| wc -l` è¿”å› 0ï¼›`templates/` ä»…ä¿ç•™ `standard_50502.md` å’Œ `naming_conventions.md` |
| 0.4 | ç»Ÿä¸€æ—¥å¿—æ–¹æ¡ˆ + æ¸…ç†æ— ç”¨ä¾èµ– | æ—  | `utils/logger_system.py`, `requirements.txt` | `loguru` å’Œ `watchdog` ä» `requirements.txt` ç§»é™¤ï¼ˆä¿æŒä½¿ç”¨æ ‡å‡†åº“ `logging`ï¼ŒMVP ä¸éœ€è¦ loguru çš„é«˜çº§åŠŸèƒ½ï¼‰ï¼›`conda run -n sca pip install -r requirements.txt` æ— æŠ¥é”™ï¼›OCR ç®¡é“ä»æ­£å¸¸è¿è¡Œ |

---

### Phase 1 â€” æµ‹è¯•åŸºç¡€è®¾æ–½

| ç¼–å· | ä»»åŠ¡ | å‰ç½®ä¾èµ– | æ¶‰åŠæ–‡ä»¶ | éªŒæ”¶æ ‡å‡† |
|------|------|---------|---------|---------|
| 1.1 | å»ºç«‹ pytest æ¡†æ¶ + OCR ç®¡é“æ ¸å¿ƒæ¨¡å—æµ‹è¯• | 0.1~0.4 | **æ–°å»º** `tests/__init__.py`, `tests/conftest.py`, `tests/test_cleaning.py`, `tests/test_verifier.py`; **ä¿®æ”¹** `requirements.txt`ï¼ˆæ·»åŠ  pytestï¼‰ | `conda run -n sca pytest tests/ -v` å…¨éƒ¨é€šè¿‡ï¼›è¦†ç›–ï¼š`RegexCleaning.clean()`ã€`LLMCleaning._post_process()`ã€`LLMCleaning._convert_latex_symbols()`ã€`LLMCleaning._fix_table_separators()`ã€`LLMCleaning._clean_html_tags()`ã€`MarkdownVerifier` ä¸‰ä¸ª check æ–¹æ³•ï¼›ä¸å« LLM API çœŸå®è°ƒç”¨ï¼ˆçº¯é€»è¾‘æµ‹è¯•ï¼‰ï¼›`pytest --cov=. --cov-report=term` è¦†ç›–ç‡ â‰¥ 50% |

---

### Phase 2 â€” çŸ¥è¯†æå–ä¸çŸ¥è¯†åº“æ„å»ºï¼ˆè®¡åˆ’ 2026-03ï¼‰

ä»å…±ç”¨åŸºç¡€æ¨¡å—å‡ºå‘ï¼Œé€æ­¥æ„å»ºæå–ç®¡é“å’ŒåŒå¼•æ“çŸ¥è¯†åº“ã€‚

| ç¼–å· | ä»»åŠ¡ | å‰ç½®ä¾èµ– | æ¶‰åŠæ–‡ä»¶ | éªŒæ”¶æ ‡å‡† |
|------|------|---------|---------|---------|
| 2.1 | Markdown ç« èŠ‚åˆ†å‰²å™¨ï¼ˆå…±ç”¨åŸºç¡€æ¨¡å—ï¼‰ | 1.1 | **æ–°å»º** `utils/chapter_splitter.py`, `tests/test_chapter_splitter.py` | `ChapterSplitter.split(markdown_text) â†’ List[ChapterFragment]`ï¼›`ChapterFragment` å« `title: str`, `level: int`, `content: str`, `line_start: int`, `line_end: int`ï¼›ç”¨ `output/4/final.md`ï¼ˆé«˜è´¨é‡æ ·æœ¬ï¼‰å’Œ `output/13/final.md`ï¼ˆä½è´¨é‡æ ·æœ¬ï¼‰æµ‹è¯•ï¼šæ­£ç¡®è¯†åˆ«å…¨éƒ¨ `##`ï¼ˆä¸€çº§ï¼‰å’Œ `###`ï¼ˆäºŒçº§ï¼‰æ ‡é¢˜è¾¹ç•Œï¼›å•å…ƒæµ‹è¯•é€šè¿‡ |
| 2.2 | çŸ¥è¯†æå–ç®¡é“ | 2.1 | **æ–°å»º** `knowledge/__init__.py`, `knowledge/extractor.py`, `knowledge/schemas.py`, `tests/test_extractor.py` | `KnowledgeExtractor.extract_all(output_dir) â†’ List[KnowledgeFragment]`ï¼›è¯»å– `output/1-16/final.md` â†’ ChapterSplitter åˆ†å‰² â†’ æ˜ å°„åˆ°æ ‡å‡† 10 ç« ç»“æ„ â†’ æ ‡æ³¨å…ƒæ•°æ® `{source_doc, chapter, section, engineering_type, quality_rating, tags}` â†’ å¯†åº¦è¿‡æ»¤ â†’ è¾“å‡º `knowledge/data/fragments.jsonl`ï¼›JSONL éç©ºï¼›æ¯è¡Œå¯ `json.loads()` è§£æä¸”å«å…¨éƒ¨å¿…éœ€å…ƒæ•°æ®å­—æ®µï¼›ä¼˜å…ˆå¤„ç†é«˜è´¨é‡æ–‡æ¡£ï¼ˆDOC 4/6/7/10/11/12ï¼‰ï¼›å•å…ƒæµ‹è¯•é€šè¿‡ |
| 2.3 | åµŒå…¥æ¨¡å‹è¯„ä¼°ä¸é€‰å‹ | 1.1ï¼ˆå¯ä¸ 2.1/2.2 **å¹¶è¡Œ**ï¼‰ | **æ–°å»º** `knowledge/embedding_eval.py`, `docs/decisions/embedding_model.md` | è‡³å°‘è¯„ä¼° 2 ä¸ªä¸­æ–‡åµŒå…¥æ¨¡å‹ï¼ˆå¦‚ bge-m3ã€text2vec-large-chineseï¼‰ï¼›æ„å»º â‰¥ 10 ç»„æ–½å·¥æ–¹æ¡ˆè¯­ä¹‰æ£€ç´¢æµ‹è¯•å¯¹ï¼ˆquery + expected_docï¼‰ï¼›è¯„ä¼°æŒ‡æ ‡ï¼štop-3 å‘½ä¸­ç‡ã€æ¨ç†å»¶è¿Ÿï¼›å†³ç­–æ–‡æ¡£è®°å½•è¯„ä¼°æ•°æ®å’Œé€‰å‹ç†ç”±ï¼›é€‰å®šæ¨¡å‹å¯åœ¨æœ¬åœ° RTX 4090 è¿è¡Œ |
| 2.4 | qmd + sqlite-vec å‘é‡åº“æ„å»º | 2.2, 2.3 | **æ–°å»º** `knowledge/vector_store.py`, `knowledge/ingest.py`, `tests/test_vector_store.py` | åˆ›å»º 8 ä¸ª Collectionï¼ˆ`ch01_basis`, `ch06_methods`, `ch07_quality`, `ch08_safety`, `ch09_emergency`, `ch10_green`, `equipment`, `templates`ï¼‰ï¼›å°† `fragments.jsonl` æŒ‰ chapter å­—æ®µå¯¼å…¥å¯¹åº” Collectionï¼›`VectorStore.search(query, collection, top_k=3, threshold=0.6)` è¿”å› `List[SearchResult]`ï¼ˆå« content + metadata + scoreï¼‰ï¼›éªŒè¯æ£€ç´¢ï¼š"æ··å‡åœŸæµ‡ç­‘æŒ¯æ£" â†’ å‘½ä¸­ ch06_methods æˆ– ch07_quality ç›¸å…³ç‰‡æ®µï¼›é›†æˆæµ‹è¯•é€šè¿‡ |
| 2.5 | LightRAG çŸ¥è¯†å›¾è°±æ„å»º | 2.2 | **æ–°å»º** `knowledge/graph.py`, `tests/test_graph.py`; **ä¿®æ”¹** `requirements.txt`ï¼ˆæ–°å¢ lightragï¼‰ | `pip install lightrag` æˆåŠŸï¼›`KnowledgeGraph.build(fragments)` ä»çŸ¥è¯†ç‰‡æ®µæå–å®ä½“ï¼ˆå·¥ç¨‹ç±»å‹ã€æ–½å·¥å·¥åºã€è®¾å¤‡ã€å±é™©æºã€è´¨é‡è¦ç‚¹ã€è§„èŒƒæ ‡å‡†ï¼‰å’Œå…³ç³»ï¼ˆå·¥åºâ†’è®¾å¤‡ã€å·¥åºâ†’å±é™©æºã€å±é™©æºâ†’å®‰å…¨æªæ–½ã€å·¥åºâ†’è´¨é‡è¦ç‚¹ï¼‰ï¼›å›¾è°±å®ä½“æ•° â‰¥ 50ã€å…³ç³»æ•° â‰¥ 100ï¼›`graph.query("çŒæ³¨æ¡©åŸºç¡€æ–½å·¥æœ‰å“ªäº›å±é™©æº")` è¿”å›å«"åå¡Œ""é«˜å¤„å è½"ç­‰å±é™©æºçš„ç»“æœï¼›å•å…ƒæµ‹è¯•é€šè¿‡ |
| 2.6 | KnowledgeRetriever ç»Ÿä¸€æ£€ç´¢æ¥å£ | 2.4, 2.5 | **æ–°å»º** `retrieval/__init__.py`, `retrieval/retriever.py`, `tests/test_retriever.py` | `KnowledgeRetriever` åè°ƒ VectorStore + KnowledgeGraphï¼›å®ç°ä¸‰ä¸ªæ–¹æ³•ï¼š`retrieve_cases(chapter, engineering_type, top_k=3) â†’ List[CaseFragment]`ï¼ˆqmd æ¡ˆä¾‹æ£€ç´¢ï¼‰ã€`infer_rules(context) â†’ List[Rule]`ï¼ˆLightRAG æ¨ç†ï¼šå·¥åºâ†’å±é™©æºâ†’æªæ–½ï¼‰ã€`retrieve_regulations(engineering_type) â†’ List[Regulation]`ï¼ˆå¼ºåˆ¶è§„èŒƒï¼‰ï¼›é›†æˆæµ‹è¯•ï¼šè¾“å…¥"çŒæ³¨æ¡©åŸºç¡€ï¼Œé‡‡ç”¨æ—‹è½¬é’»æœºæˆå­”"åŒæ—¶è¿”å›æ¡ˆä¾‹ç‰‡æ®µ + å±é™©æºæ¨ç†é“¾ï¼›èåˆç­–ç•¥ï¼šLightRAG è§„åˆ™ > qmd æ¡ˆä¾‹ > æ¨¡æ¿ |

---

### Phase 3 â€” æ–½å·¥æ–¹æ¡ˆç”Ÿæˆç³»ç»Ÿï¼ˆè®¡åˆ’ 2026-04ï¼‰

3.1/3.2 å¯ä¸ Phase 2 **å¹¶è¡Œå¯åŠ¨**ï¼ˆä¸ä¾èµ–çŸ¥è¯†åº“ï¼‰ã€‚3.3 èµ·éœ€ç­‰å¾… 2.6 å®Œæˆã€‚

| ç¼–å· | ä»»åŠ¡ | å‰ç½®ä¾èµ– | æ¶‰åŠæ–‡ä»¶ | éªŒæ”¶æ ‡å‡† |
|------|------|---------|---------|---------|
| 3.1 | è¾“å…¥æ ‡å‡†åŒ–æ¨¡å— | 1.1ï¼ˆå¯ä¸ Phase 2 **å¹¶è¡Œ**ï¼‰ | **æ–°å»º** `generation/__init__.py`, `generation/models.py`, `generation/input_parser.py`, `tests/test_input_parser.py` | `StandardModel`ï¼ˆPydanticï¼‰å«å››ç»„å­—æ®µï¼š`basic`ï¼ˆproject_name/type/location/scaleï¼‰ã€`technical`ï¼ˆgeology/climate/special_requirementsï¼‰ã€`participants`ï¼ˆowner/contractor/supervisor/designerï¼‰ã€`constraints`ï¼ˆtimeline/budget/risksï¼‰ï¼›`InputParser.from_json(dict) â†’ StandardModel` æ ¡éªŒé€šè¿‡ï¼›`InputParser.from_text(str) â†’ StandardModel` æ¥å£å®šä¹‰å®Œæˆï¼ˆå†…éƒ¨è°ƒç”¨ LLM æå–ç»“æ„åŒ–å­—æ®µï¼‰ï¼›ç”¨ `workflow/å·¥ç¨‹æ¦‚å†µ.md` ä¸­çš„ä¿¡æ¯æ„å»ºæµ‹è¯•ç”¨ä¾‹ï¼›å•å…ƒæµ‹è¯•é€šè¿‡ |
| 3.2 | Prompt æ¨¡æ¿ä½“ç³» + BaseChapterAgent åŸºç±» | 3.1 | **æ–°å»º** `agents/__init__.py`, `agents/base.py`, `prompts/static/role.j2`, `prompts/static/format.j2`, `prompts/chapters/template.j2`, `tests/test_base_agent.py`; **ä¿®æ”¹** `requirements.txt`ï¼ˆæ–°å¢ jinja2ï¼‰ | `BaseChapterAgent` å®šä¹‰ `generate(context: ChapterContext) â†’ str` å’Œ `post_process(content: str) â†’ str`ï¼›`ChapterContext` å« `macro_view`ï¼ˆå‰åºæ‘˜è¦ï¼‰ã€`key_details`ï¼ˆå½“å‰ç« èŠ‚å‚æ•°ï¼‰ã€`retrieval`ï¼ˆæ£€ç´¢ç»“æœï¼‰ä¸‰ä¸ªåŒºå—ï¼›Jinja2 æ¨¡æ¿æ¸²æŸ“åŒ…å« {è§’è‰²å®šä¹‰}{è¾“å‡ºæ ¼å¼}{ç« èŠ‚è§„èŒƒ}{å·¥ç¨‹ä¿¡æ¯}{æ£€ç´¢ç»“æœ}{å‰åºæ‘˜è¦}{ç”ŸæˆæŒ‡ä»¤} ä¸ƒæ®µï¼›mock KnowledgeRetriever å `BaseChapterAgent.generate()` èƒ½è¾“å‡ºæœ‰æ•ˆ Markdownï¼›å•å…ƒæµ‹è¯•é€šè¿‡ |
| 3.3 | 9 ä¸ªç« èŠ‚ Agent å®ç° | 3.2, **2.6** | **æ–°å»º** `agents/chapter1_basis.py` ~ `agents/chapter9_emergency.py`, `prompts/chapters/ch01.j2` ~ `prompts/chapters/ch09.j2`, `tests/test_chapter_agents.py` | æ¯ä¸ª Agent ç»§æ‰¿ `BaseChapterAgent`ï¼Œé…æœ‰ç‹¬ç«‹ Jinja2 Prompt æ¨¡æ¿ï¼›æ¯ä¸ªæ¨¡æ¿åµŒå…¥ `templates/standard_50502.md` ä¸­å¯¹åº”ç« èŠ‚çš„å­æ ‡é¢˜ç»“æ„ï¼›ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆè‡³å°‘ 2 ç« ï¼‰ï¼šChapter 2ï¼ˆå·¥ç¨‹æ¦‚å†µï¼Œæœ€ç®€å•ï¼‰å’Œ Chapter 6ï¼ˆæ–½å·¥æ–¹æ³•ï¼Œæœ€å¤æ‚ï¼‰è¾“å…¥ StandardModel + KnowledgeRetriever â†’ è¾“å‡ºç»“æ„ç¬¦åˆ `naming_conventions.md` æ ‡å‡†æ ‡é¢˜çš„ Markdownï¼›æ¯ä¸ª Agent å¯ç‹¬ç«‹æäº¤ï¼ˆä¸€ä¸ª Agent ä¸€ä¸ª commitï¼‰ |
| 3.4 | GenerationCoordinator ä¸²è¡Œç¼–æ’ | 3.3 | **æ–°å»º** `generation/coordinator.py`, `tests/test_coordinator.py`; **ä¿®æ”¹** `requirements.txt`ï¼ˆæ–°å¢ langchain, langgraphï¼‰ | `GenerationCoordinator` ä½¿ç”¨ LangGraph çŠ¶æ€å›¾ä¸²è¡Œç¼–æ’ 9 ä¸ª Agentï¼›ç« èŠ‚é—´ä¾èµ–ï¼šäºŒâ†’å››/äº”/å…­ï¼Œå…­â†’ä¸ƒ/å…«ï¼Œå…«â†’ä¹ï¼ˆè§ 03-chapter-specification ä¾èµ–å›¾ï¼‰ï¼›ä¸Šä¸‹æ–‡ç®¡ç†ï¼šæ¯ç« ç”Ÿæˆåæå– â‰¤ 150 å­—æ‘˜è¦ + å…³é”®å‚æ•°ï¼ˆå·¥ç¨‹åç§°/ç”µå‹ç­‰çº§/æ–½å·¥å·¥æœŸç­‰ï¼‰ï¼Œæ³¨å…¥åç»­ Agent çš„ `ChapterContext.macro_view`ï¼›ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆmock LLMï¼‰ï¼šè¾“å…¥ StandardModel â†’ æŒ‰ä¾èµ–åºç”Ÿæˆ 9 ç«  â†’ éªŒè¯æ¯ç«  context åŒ…å«å‰åºæ‘˜è¦ |
| 3.5 | éªŒè¯ä¿®å¤ + ç”Ÿæˆç³»ç»Ÿå…¥å£ | 3.4 | **æ–°å»º** `validation/__init__.py`, `validation/chapter_validator.py`, `validation/consistency_validator.py`, `validation/fixer.py`, `main_generator.py`, `tests/test_generation_validation.py` | **å•ç« éªŒè¯**ï¼šå¿…éœ€å­ç« èŠ‚é½å…¨ï¼ˆæ­£åˆ™åŒ¹é…æ ‡å‡†æ ‡é¢˜ï¼‰ã€å·¥ç¨‹åç§°ä¸€è‡´æ€§ï¼ˆç²¾ç¡®åŒ¹é… StandardModel.basic.project_nameï¼‰ã€å†…å®¹éç©ºæ´ï¼ˆå­—æ•° > é˜ˆå€¼ï¼‰ï¼›**å…¨æ–‡éªŒè¯**ï¼šäº‹å®ä¸€è‡´æ€§ï¼ˆå·¥ç¨‹åç§°/ç”µå‹ç­‰çº§/å·¥æœŸå…¨æ–‡ç²¾ç¡®åŒ¹é…ï¼‰ã€é€»è¾‘ä¾èµ–ï¼ˆç¬¬ä¸ƒç« è´¨é‡æ§åˆ¶è¦†ç›–ç¬¬å…­ç« å…¨éƒ¨å·¥åºï¼‰ã€9 ç« å®Œæ•´ï¼›**è‡ªåŠ¨ä¿®å¤**ï¼šæœ¯è¯­æ›¿æ¢ï¼ˆç›®æ ‡ 100%ï¼‰ã€ç¼ºå¤±å­ç« èŠ‚ LLM è¡¥ç”Ÿæˆï¼ˆç›®æ ‡ 90%ï¼‰ã€é€»è¾‘çŸ›ç›¾æ ‡è®°ä¸ºäººå·¥å®¡æ ¸ï¼›CLI å…¥å£ `conda run -n sca python main_generator.py --input project_info.json --output generated_plan.md` å¯æ‰§è¡Œ |

---

### Phase 4 â€” æ–½å·¥æ–¹æ¡ˆå®¡æ ¸ç³»ç»Ÿï¼ˆè®¡åˆ’ 2026-05~06ï¼‰

4.1 å¯åœ¨ 2.1 å®Œæˆåæå‰å¯åŠ¨ã€‚4.2/4.3 å¯ä¸ Phase 3 **å¹¶è¡Œå¼€å‘**ã€‚

| ç¼–å· | ä»»åŠ¡ | å‰ç½®ä¾èµ– | æ¶‰åŠæ–‡ä»¶ | éªŒæ”¶æ ‡å‡† |
|------|------|---------|---------|---------|
| 4.1 | ç« èŠ‚è¯†åˆ«ä¸æ ‡é¢˜æ˜ å°„ | 2.1 | **æ–°å»º** `review/__init__.py`, `review/chapter_mapper.py`, `tests/test_chapter_mapper.py` | å¤ç”¨ `utils/chapter_splitter.py` åˆ†å‰²è¾“å…¥æ–‡æ¡£ï¼›`ChapterMapper.map(fragments) â†’ MappingResult`ï¼šå°†å®é™…æ ‡é¢˜æ˜ å°„åˆ°æ ‡å‡† 10 ç« ï¼Œè¿”å› `{æ ‡å‡†ç« èŠ‚å: [åŒ¹é…çš„ç‰‡æ®µ]}` + `æœªæ˜ å°„ç‰‡æ®µåˆ—è¡¨`ï¼›æ˜ å°„ç­–ç•¥ï¼šå…ˆå…³é”®è¯è§„åˆ™åŒ¹é…ï¼ˆç¼–åˆ¶ä¾æ®/å·¥ç¨‹æ¦‚å†µ/å®‰å…¨/è´¨é‡/åº”æ€¥ç­‰å…³é”®è¯ï¼‰ï¼Œä¸å‘½ä¸­åˆ™è°ƒç”¨ LLM åˆ¤æ–­ï¼›ç”¨ `output/6/final.md`ï¼ˆæ ‡å‡†ç»“æ„ï¼‰å’Œ `output/8/final.md`ï¼ˆä¸“é¢˜æ–¹æ¡ˆï¼Œç»“æ„ä¸æ ‡å‡†ï¼‰æµ‹è¯•ï¼›DOC 6 åº”æ˜ å°„ â‰¥ 7 ä¸ªæ ‡å‡†ç« èŠ‚ï¼›å•å…ƒæµ‹è¯•é€šè¿‡ |
| 4.2 | ç« èŠ‚å®Œæ•´æ€§æ£€æŸ¥ | 4.1 | **æ–°å»º** `review/completeness_checker.py`, `tests/test_completeness_checker.py` | `CompletenessChecker.check(mapping_result) â†’ CompletenessReport`ï¼›æŠ¥å‘Šå«ï¼šç¼ºå¤±ç« èŠ‚æ¸…å•ã€æ¯ç« å­ç« èŠ‚è¦†ç›–ç‡ï¼ˆå¯¹ç…§ `templates/standard_50502.md` çš„å­æ ‡é¢˜ï¼‰ã€æ€»ä½“è¯„åˆ†ï¼ˆâ­â­â­â­â­ ä¼˜ç§€ 9 ç« å…¨è¦†ç›– / â­â­â­â­ è‰¯å¥½ 7~8 ç«  / â­â­â­ åˆæ ¼ 5~6 ç«  / â­â­ ä¸åˆæ ¼ <5 ç« ï¼‰ï¼›ç”¨ DOC 4ï¼ˆé«˜è´¨é‡â†’åº” â‰¥ è‰¯å¥½ï¼‰å’Œ DOC 13ï¼ˆä»… 5 ä¸ªç« èŠ‚â†’åº”ä¸ºä¸åˆæ ¼ï¼‰éªŒè¯è¯„åˆ†åˆç†æ€§ï¼›å•å…ƒæµ‹è¯•é€šè¿‡ |
| 4.3 | ç¼–åˆ¶ä¾æ®æ—¶æ•ˆæ€§æ£€æŸ¥ | 4.1 | **æ–°å»º** `review/timeliness_checker.py`, `review/data/standards_db.json`, `tests/test_timeliness_checker.py` | `standards_db.json` åŒ…å« â‰¥ 30 æ¡å¸¸ç”¨æ ‡å‡†ï¼ˆä» 16 ä»½æ–‡æ¡£ç¬¬ä¸€ç« æå–å…¨éƒ¨æ ‡å‡†ç¼–å·ï¼Œæ‰‹åŠ¨æ ¡éªŒæœ€æ–°ç‰ˆæœ¬å’ŒçŠ¶æ€ï¼‰ï¼›æ¯æ¡æ ¼å¼ï¼š`{"id": "GB 50300", "current_year": "2013", "status": "ç°è¡Œ", "title": "..."}`ï¼›`TimelinessChecker.check(chapter1_content) â†’ TimelinessReport`ï¼šæ­£åˆ™æå– `GB/T XXXXX-YYYY`ã€`DL/T XXXXX-YYYY`ã€`Q/CSG XXXXX` æ ¼å¼æ ‡å‡† â†’ æŸ¥ standards_db â†’ æ¯”å¯¹å¹´ä»½ï¼›æŠ¥å‘Šå«ï¼šå¼•ç”¨æ ‡å‡†æ€»æ•°ã€ç°è¡Œ/è¿‡æ—¶/æœªæ”¶å½•æ¸…å•ã€å»ºè®®æ›´æ–°ç‰ˆæœ¬ï¼›å•å…ƒæµ‹è¯•é€šè¿‡ |
| 4.4 | å†…å®¹åˆè§„æ€§æ£€æŸ¥ | 4.1, **2.5** | **æ–°å»º** `review/compliance_checker.py`, `tests/test_compliance_checker.py` | `ComplianceChecker.check(chapters, knowledge_graph) â†’ ComplianceReport`ï¼›è¯†åˆ«ç¬¬å…­ç« æ–½å·¥æ–¹æ³•/å·¥åº â†’ é€šè¿‡ LightRAG æ¨ç†æ¯ä¸ªå·¥åºçš„å¼ºåˆ¶è¦æ±‚ï¼ˆå®‰å…¨æªæ–½ã€è´¨é‡è¦ç‚¹ã€è®¾å¤‡é…ç½®ï¼‰â†’ æ£€æŸ¥æ–‡æ¡£ä¸­å¯¹åº”ç« èŠ‚æ˜¯å¦è¦†ç›–ï¼›æŠ¥å‘Šå«ï¼šæ£€æŸ¥é¡¹æ¸…å•ã€æ¯é¡¹åˆè§„ç­‰çº§ï¼ˆğŸ”´ ä¸¥é‡ä¸åˆè§„ / ğŸŸ¡ éƒ¨åˆ†ä¸åˆè§„ / ğŸŸ¢ åˆè§„ / âšª æ— æ³•åˆ¤å®šï¼‰ã€è§„èŒƒæ¡æ¬¾å¼•ç”¨ï¼›ç”¨ DOC 12ï¼ˆçŒæ³¨æ¡©ï¼Œé«˜è´¨é‡ï¼‰æµ‹è¯•ï¼šåº”èƒ½è¯†åˆ«çŒæ³¨æ¡©å·¥åºå¹¶éªŒè¯å®‰å…¨æªæ–½è¦†ç›–ï¼›å•å…ƒæµ‹è¯•ï¼ˆmock LightRAGï¼‰é€šè¿‡ |
| 4.5 | æ£€æµ‹æŠ¥å‘Šç”Ÿæˆ + å®¡æ ¸ç³»ç»Ÿå…¥å£ | 4.2, 4.3, 4.4 | **æ–°å»º** `review/report_generator.py`, `review/coordinator.py`, `main_reviewer.py`, `tests/test_review_system.py` | `ReviewCoordinator` ç¼–æ’ä¸‰ç»´åº¦æ£€æµ‹ï¼ˆå®Œæ•´æ€§/æ—¶æ•ˆæ€§/åˆè§„æ€§å¯å¹¶è¡Œæ‰§è¡Œï¼‰ï¼›`ReportGenerator.generate(completeness, timeliness, compliance) â†’ str`ï¼šè¾“å‡ºç»“æ„åŒ– Markdown æŠ¥å‘Šï¼Œæ ¼å¼ç¬¦åˆ `07-review-system.md` å®šä¹‰ï¼ˆåŸºæœ¬ä¿¡æ¯ + æ€»ä½“è¯„çº§ + ä¸‰ç»´åº¦è¯¦æƒ… + æ•´æ”¹å»ºè®®ï¼‰ï¼›CLI å…¥å£ `conda run -n sca python main_reviewer.py --input output/4/final.md --output review_report.md` å¯æ‰§è¡Œå¹¶è¾“å‡ºå®Œæ•´æŠ¥å‘Šï¼›ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆè‡³å°‘ 2 ä»½æ–‡æ¡£ï¼‰é€šè¿‡ |

---

### Phase 5 â€” æ–‡æ¡£åŒæ­¥ä¸æ”¶å°¾

| ç¼–å· | ä»»åŠ¡ | å‰ç½®ä¾èµ– | æ¶‰åŠæ–‡ä»¶ | éªŒæ”¶æ ‡å‡† |
|------|------|---------|---------|---------|
| 5.1 | æ›´æ–°å…¨éƒ¨æ–‡æ¡£ï¼ŒåŒæ­¥ä»£ç ä¸è§„åˆ’ | 3.5, 4.5 | `docs/architecture/00-09.md`, `docs/CODEMAPS/*.md`, `CLAUDE.md`, `README.md`, `docs/PROJECT_OVERVIEW.md` | æ¶æ„æ–‡æ¡£ 00-09 ä¸­çš„"æ ¸å¿ƒç±»"è¡¨æ ¼ã€æ¥å£å®šä¹‰ä¸å®é™…ä»£ç ä¸€è‡´ï¼›CODEMAPS åæ˜ å…¨éƒ¨æ–°å¢æ¨¡å—ï¼ˆknowledge/ agents/ generation/ review/ retrieval/ validation/ï¼‰ï¼›CLAUDE.md å¸¸ç”¨å‘½ä»¤åŒ…å«ç”Ÿæˆå’Œå®¡æ ¸å…¥å£ï¼›README.md åŒ…å«å®Œæ•´ä½¿ç”¨è¯´æ˜ï¼›åˆ é™¤æ‰€æœ‰è¿‡æ—¶å†…å®¹ï¼ˆå¦‚"7 å¤§ç« èŠ‚æ ‡å‡†"â†’"10 ç« èŠ‚"ï¼‰ |

---

### ä»»åŠ¡ç»Ÿè®¡

| Phase | ä»»åŠ¡æ•° | æè¿° | å¹¶è¡Œç­–ç•¥ |
|-------|--------|------|---------|
| 0 | 4 | ä»£ç æ¸…ç† | å››ä¸ªä»»åŠ¡äº’ç›¸ç‹¬ç«‹ï¼Œå…¨éƒ¨å¯å¹¶è¡Œ |
| 1 | 1 | æµ‹è¯•åŸºç¡€è®¾æ–½ | å•ä»»åŠ¡ |
| 2 | 6 | çŸ¥è¯†æå– + çŸ¥è¯†åº“æ„å»º | 2.3 å¯ä¸ 2.1/2.2 å¹¶è¡Œï¼›2.4/2.5 å¯å¹¶è¡Œ |
| 3 | 5 | æ–½å·¥æ–¹æ¡ˆç”Ÿæˆç³»ç»Ÿ | 3.1/3.2 å¯ä¸ Phase 2 å¹¶è¡Œå¯åŠ¨ |
| 4 | 5 | æ–½å·¥æ–¹æ¡ˆå®¡æ ¸ç³»ç»Ÿ | 4.1~4.3 å¯ä¸ Phase 3 å¹¶è¡Œ |
| 5 | 1 | æ–‡æ¡£åŒæ­¥ | æœ€åæ‰§è¡Œ |
| **åˆè®¡** | **22** | â€” | â€” |

---

### å…³é”®è·¯å¾„

```
0.* â†’ 1.1 â†’ 2.1 â†’ 2.2 â†’ 2.5 â†’ 2.6 â†’ 3.3 â†’ 3.4 â†’ 3.5 â†’ 5.1
```

å…³é”®è·¯å¾„ä¸Šå…± **10 ä¸ªä»»åŠ¡**ï¼ˆPhase 0 ç®— 1 æ­¥ï¼Œå› ä¸ºå…¨éƒ¨å¯å¹¶è¡Œï¼‰ã€‚

**å¯å¹¶è¡Œçš„éå…³é”®è·¯å¾„ä»»åŠ¡ï¼ˆ12 ä¸ªï¼‰**ï¼š
- **2.3**ï¼ˆåµŒå…¥æ¨¡å‹è¯„ä¼°ï¼‰ï¼šä¸ 2.1/2.2 å¹¶è¡Œï¼Œåœ¨ 2.4 å‰æ±‡å…¥
- **2.4**ï¼ˆå‘é‡åº“æ„å»ºï¼‰ï¼šä¸ 2.5 å¹¶è¡Œï¼Œåœ¨ 2.6 å‰æ±‡å…¥
- **3.1 â†’ 3.2**ï¼ˆè¾“å…¥è§£æ + Agent åŸºç±»ï¼‰ï¼šä¸ Phase 2 æ•´ä½“å¹¶è¡Œï¼Œåœ¨ 3.3 å‰æ±‡å…¥
- **4.1 â†’ 4.2**ï¼ˆç« èŠ‚æ˜ å°„ + å®Œæ•´æ€§æ£€æŸ¥ï¼‰ï¼š2.1 å®Œæˆåå³å¯å¯åŠ¨ï¼Œä¸ Phase 3 å¹¶è¡Œ
- **4.1 â†’ 4.3**ï¼ˆç« èŠ‚æ˜ å°„ + æ—¶æ•ˆæ€§æ£€æŸ¥ï¼‰ï¼šåŒä¸Šï¼Œä¸ 4.2 äº¦å¯å¹¶è¡Œ
- **4.4**ï¼ˆåˆè§„æ€§æ£€æŸ¥ï¼‰ï¼š2.5 å®Œæˆåå¯åŠ¨ï¼Œä¸ Phase 3 ååŠæ®µå¹¶è¡Œ
- **4.5**ï¼ˆå®¡æ ¸å…¥å£ï¼‰ï¼š4.2/4.3/4.4 å…¨éƒ¨å®Œæˆåå¯åŠ¨

### æ—¶é—´çº¿å¯¹ç…§

| Phase | è®¡åˆ’æ—¶é—´ | å…³é”®è·¯å¾„ä»»åŠ¡æ•° | å¤‡æ³¨ |
|-------|---------|:---:|------|
| 0 + 1 | ç«‹å³ | 2 | æ¸…ç†+æµ‹è¯•ï¼Œ1~2 å¤© |
| 2 | 2026-03 | 4 | çŸ¥è¯†åº“æ˜¯æœ€å¤§ä¸ç¡®å®šæ€§ï¼ˆåµŒå…¥æ¨¡å‹+LightRAGï¼‰ |
| 3 | 2026-04 | 3 | 3.1/3.2 æå‰å®Œæˆå¯ç¼©çŸ­ |
| 4 | 2026-05~06 | 0ï¼ˆä¸ P3 å¹¶è¡Œï¼‰ | 4.1 å¯åœ¨ 2.1 åæå‰å¯åŠ¨ |
| 5 | ä¸­æœŸæ£€æŸ¥å‰ | 1 | æ–‡æ¡£æ”¶å°¾ |
| **ä¸­æœŸæ£€æŸ¥** | **2026-06-30** | â€” | æŠ¥å‘Š + ä»£ç  + 2 ç¯‡è®ºæ–‡ + 1 é¡¹ä¸“åˆ© |

---

*æœ¬æ–‡ä»¶ç”±é¡¹ç›®ä»£ç ä¸è§„åˆ’æ–‡æ¡£çš„é€è¡Œæ¯”å¯¹è‡ªåŠ¨ç”Ÿæˆ*
